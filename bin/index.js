"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),r=function(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)},o=function(e){return function(t){return(void 0===t?"undefined":n(t))===e}},i=function(n){return function(e){return e.type===n}},u=function(n){return o("undefined")(n)&&void 0==n},a=o("string"),c=o("boolean"),d=o("number"),l=function(n){return n.toString().match("function")},f=function(n){return n.toString().match("class ")},s=function(n){return null===n},p=i("native"),h=i("thunk"),v=i("text"),y=Array.isArray,m=function(n,e){return n.fn===e.fn},b=function(n){return["svg","path","animate"].indexOf(n)>=0},g=function(n){return/^on/.test(n)},N=function(n){return n.slice(2).toLowerCase()};function A(n){for(var e=arguments,t=arguments.length,r=Array(t>2?t-2:0),o=2;o<t;o++)r[o-2]=e[o];var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n)return r=Array.prototype.reduce.call(r,E,[]),l(n)?$(n,i,r,n):{type:"native",tagName:n,attributes:i,children:r}}function $(n,e,t,r){return{type:"thunk",fn:n,props:e,children:t,options:r}}function w(n){return{type:n?"text":"empty",nodeValue:n}}function E(n,e){return a(e)||d(e)?n.push(w(e)):s(e)||u(e)||(y(e)?n=[].concat(r(n),r(e.reduce(E,[]))):n.push(e)),n}function k(n,e){e&&Object.keys(e).forEach(function(t){g(t)&&n.addEventListener(N(t),e[t])})}function x(n,e){e&&Object.keys(e).forEach(function(t){g(t)&&n.removeEventListener(N(t),e[t])})}function S(n,e,t,r){t?(n[r](e,t),n[e]=!0):(n[r](e),n[e]=!1)}function C(n,e,t,r){g(e)||("className"===e?n[r]("class",t):c(t)?S(n,e,t,r):void 0!=t&&(""+t).length?n[r](e,t):n.removeAttribute(e))}function O(n,e,t,r){t?r&&t===r||C(n,e,t,"setAttribute"):C(n,e,c(t)?t:r,"removeAttribute")}function j(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},t,e);Object.keys(r).forEach(function(r){g(r)?(x(n,{name:t[r]}),k(n,{name:e[r]})):O(n,r,e[r],t[r])})}function V(n){var e=a(n)||d(n)?n:"";return document.createTextNode(e)}function L(n,e){var t=n.props,r=n.children,o=n.options.onCreate,i={children:r,props:t},u=void 0,a=void 0;if(f(n.fn))u=(a=new n.fn).render(i),a.$update=a.$update.bind(this,function(){e&&e("updateAll")});else try{u=n.fn(i)}catch(t){u=(a=new n.fn).render(i),a.$update=a.$update.bind(this,function(){e&&e("updateAll")})}if(!u)return"";var c=_(u);return k(c,u.attributes),o&&o(i),n.state={vnode:u,$ins:a,model:i},c}function T(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function M(n,e){var t=b(n.tagName)?T(n.tagName):document.createElement(n.tagName);return n.attributes&&j(t,n.attributes),n.attributes&&k(t,n.attributes),n.children.map(function(n){return _(n,e)}).forEach(t.appendChild.bind(t)),t}function P(){return document.createElement("noscript")}var _=function(n,e){if(!s(n)&&!u(n))switch(n.type){case"text":return V(n.nodeValue);case"thunk":return L(n,e);case"empty":return P();case"native":return M(n,e)}};function q(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n)return e===t&&"thunk"!=e.type?n:!u(e)&&u(t)?H(n,e,t,r):u(e)&&!u(t)?(n.appendChild(_(t)),n):!s(e)&&s(t)||s(e)&&!s(t)?R(n,e,t,r):e.type!==t.type?R(n,e,t,r):t.attributes&&t.attributes.forceUpdate?R(n,e,t,r):p(t)?e.tagName!==t.tagName?R(n,e,t,r):(j(n.childNodes[r],t.attributes,e.attributes),z(n,e,t,r)):v(t)?(e.nodeValue!==t.nodeValue&&(n.childNodes[r].nodeValue=t.nodeValue),n):h(t)?m(e,t)?B(n,e,t,r):D(n,e,t,r):void 0}function H(n,e,t,r){U(e),n.removeChild(n.childNodes[r])}function R(n,e,t,r){var o=_(t);return U(e),n.replaceChild(o,n.childNodes[r]),o}function U(n){for(;h(n);){var e=n.options.onRemove,t=n.state.model;e&&e(t),n=n.state.vnode}n.children&&n.children.forEach(U)}function z(n,e,t,r){var o=e.children||[],i=t.children||[],u=void 0,a=Array.prototype.slice.call(n.childNodes),c=i.length;for(u=0;u<o.length||u<c;u++)q(a[r],o[u],i[u],u>=c?c:u);return n}function B(n,e,t,r){var o=t.props,i={children:t.children,props:o},u=void 0;if(f(t.fn))u=e.state.$ins.render(i);else try{u=t.fn(i)}catch(n){u=e.state.$ins.render(i)}return q(n,e.state.vnode,u,r),t.state={vnode:u,$ins:e.state.$ins,model:i},n}function D(){return B.apply(null,arguments)}function F(n,e){var t=this,r=e||{node:null,oldNode:null,ins:null},o=r.node,i=r.oldNode,u=r.ins;n="string"==typeof n?document.querySelector(n):n;var a=function(e){return"updateAll"===e&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;try{e=u&&u.render()}catch(n){}q(t,i,e),i=e}()};return e||(n.innerHTML=""),function(e){var r=e;if(r.children&&!r.children.length){var c=r,d=c.props,l={children:c.children,props:d};r=r.fn(l)}return"render"in e&&(r=e.render(),u=e,e.$update=e.$update.bind(t,function(){a("updateAll")})),o?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return q(arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,i,e),{node:o,oldNode:i=e,ins:u}}(r):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return o=_(e,a),t.appendChild(o),{node:o,oldNode:i=e,ins:u}}(r)}}var G=function(){function n(){e(this,n)}return t(n,[{key:"$update",value:function(n){n&&n()}},{key:"render",value:function(){}}]),n}(),I=A,J=G,K=function(n){for(var e=arguments,t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=e[o];return function(){if(!("render"in r[0])){var e=F(n)(A(r[0],null));return r.map(function(t){t.$update=function(){e=F(n,e)(A(r[0],null))}}),r}F(n)(r[0])}()};exports.l=I,exports.component=J,exports.app=K;
